<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.Integer?>
<?import java.lang.String?>
<?import java.net.URL?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox stylesheets="@style.css" xmlns="http://javafx.com/javafx/22.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.controllers.AfficherDemandeDevis">
    <stylesheets>
        <URL value="@style.css" />
    </stylesheets>

    <!-- Main Content Container with Sidebar and Content -->
    <HBox styleClass="main-container">
        <!-- Sidebar Menu -->
        <VBox maxWidth="300" minWidth="200" prefWidth="242" styleClass="sidebar">
            <padding>
                <Insets bottom="20.0" left="15.0" right="15.0" top="20.0" />
            </padding>

            <!-- Logo Section -->
            <VBox alignment="CENTER" spacing="10" styleClass="logo-section">
                <padding>
                    <Insets bottom="30" />
                </padding>
                <ImageView fx:id="logo" fitHeight="80.0" fitWidth="80.0" styleClass="logo">
                    <image>
                        <Image url="@logo-app.png" />
                    </image>
                </ImageView>
                <Label styleClass="app-title" text="Gestion Devis" />
            </VBox>

            <!-- Menu Buttons -->
            <VBox spacing="15" styleClass="menu-section">
                <padding>
                    <Insets top="30" />
                </padding>
                <Button onAction="#navDashboard" styleClass="menu-button" text="Tableau de bord" />
                <Button onAction="#navDevisList" styleClass="menu-button primary" text="Liste des devis" />
                <Button onAction="#navClients" styleClass="menu-button" text="Clients" />
                <Button onAction="#navEquipements" styleClass="menu-button" text="Équipements" />
            </VBox>
        </VBox>

        <!-- Main Content Area -->
        <VBox styleClass="content-container" HBox.hgrow="ALWAYS">
            <!-- Page Header with Search -->
            <HBox alignment="CENTER" prefHeight="80.0" spacing="20" styleClass="page-header">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>
                <Label styleClass="page-title" text="Gestion des devis" />

                <HBox alignment="CENTER_RIGHT" spacing="10" HBox.hgrow="ALWAYS">
                    <TextField fx:id="searchField" onKeyReleased="#recherche" promptText="Rechercher un devis..." styleClass="search-field" />
                    <Button fx:id="filtre" onAction="#btn_filtre" styleClass="primary-button" text="Filtrer" />
                    <Button fx:id="export_xl" onAction="#btn_xl" styleClass="secondary-button" text="Exporter" />
                </HBox>
            </HBox>

            <!-- Stats Cards -->
            <HBox spacing="15" styleClass="stats-container">
                <padding>
                    <Insets bottom="20" left="20" right="20" />
                </padding>
                <VBox styleClass="stat-card">
                    <Label styleClass="stat-title" text="Total des devis" />
                    <Label fx:id="totalDevisLabel" styleClass="stat-value primary" text="0" />
                    <Label styleClass="stat-subtitle" text="+0% ce mois" />
                </VBox>
                <VBox styleClass="stat-card">
                    <Label styleClass="stat-title" text="En attente" />
                    <Label fx:id="pendingDevisLabel" styleClass="stat-value warning" text="0" />
                    <Label styleClass="stat-subtitle" text="+0 depuis hier" />
                </VBox>
                <VBox styleClass="stat-card">
                    <Label styleClass="stat-title" text="Validés" />
                    <Label fx:id="approvedDevisLabel" styleClass="stat-value success" text="0" />
                    <Label styleClass="stat-subtitle" text="+0% ce mois" />
                </VBox>
                <VBox styleClass="stat-card">
                    <Label styleClass="stat-title" text="Refusés" />
                    <Label fx:id="rejectedDevisLabel" styleClass="stat-value error" text="0" />
                    <Label styleClass="stat-subtitle" text="-0% ce mois" />
                </VBox>
            </HBox>

            <!-- Devis Table Section -->
            <VBox spacing="20" styleClass="content-card" VBox.vgrow="ALWAYS">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>

                <!-- Filters -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <ComboBox fx:id="statusFilter" styleClass="filter-combo">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="Tous" />
                                <String fx:value="En attente" />
                                <String fx:value="Validé" />
                                <String fx:value="Refusé" />
                            </FXCollections>
                        </items>
                    </ComboBox>
                    <ComboBox fx:id="dateFilter" styleClass="filter-combo" />
                </HBox>

                <!-- Devis Table -->
                <TableView fx:id="devisTable" styleClass="custom-table" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="idColumn" styleClass="table-column" text="N°" />
                        <TableColumn fx:id="clientColumn" styleClass="table-column" text="Client" />
                        <TableColumn fx:id="propositionColumn" styleClass="table-column" text="Proposition" />
                        <TableColumn fx:id="quantiteColumn" styleClass="table-column" text="Quantite" />
                    </columns>
                </TableView>

                <!-- Pagination -->
                <HBox alignment="CENTER_RIGHT" spacing="10" styleClass="pagination-container">
                    <Label styleClass="pagination-label" text="10 éléments par page" />
                    <ComboBox fx:id="itemsPerPage" styleClass="pagination-combo">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <Integer fx:value="10" />
                                <Integer fx:value="25" />
                                <Integer fx:value="50" />
                                <Integer fx:value="100" />
                            </FXCollections>
                        </items>
                    </ComboBox>
                    <Button styleClass="secondary-button" text="Précédent" />
                    <Label fx:id="pageInfoLabel" styleClass="pagination-label" text="1-10 de 0" />
                    <Button styleClass="secondary-button" text="Suivant" />
                </HBox>
            </VBox>
        </VBox>
    </HBox>
</VBox>
