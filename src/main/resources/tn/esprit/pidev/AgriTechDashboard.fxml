<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.text.*?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="1000" minWidth="1840" stylesheets="@styles.css" xmlns="http://javafx.com/javafx/11.0.14-internal" xmlns:fx="http://javafx.com/fxml/1" fx:controller="tn.esprit.pidev.AgriTechController">

    <!-- Left Sidebar -->
    <left>
        <VBox fx:id="sidebar" prefWidth="240.0" styleClass="sidebar">
            <!-- Logo -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="logo-container">
                <Label styleClass="logo-text" text="HopeNest" />
                <Button fx:id="closeSidebarBtn" onAction="#toggleSidebar" styleClass="icon-button" visible="false">
                    <graphic>
                        <Label styleClass="icon" text="✕" />
                    </graphic>
                </Button>
                <padding>
                    <Insets bottom="15" left="15" right="15" top="15" />
                </padding>
            </HBox>

            <!-- User Profile -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="user-profile">
                <Circle radius="20" styleClass="user-avatar" />
                <VBox>
                    <Label fx:id="welcomeLabel" styleClass="user-name" text="Admin" />
                    <Label styleClass="user-role" text="Administrator" />
                </VBox>
                <padding>
                    <Insets bottom="15" left="15" right="15" top="15" />
                </padding>
            </HBox>

            <!-- Navigation Menu -->
            <ScrollPane fitToWidth="true" styleClass="sidebar-menu-container">
                <VBox styleClass="sidebar-menu">
                    <Button alignment="CENTER" contentDisplay="CENTER" onAction="#showDashboard" styleClass="sidebar-menu-item,active">
                        <graphic>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label styleClass="menu-icon" text="⌂" />
                                <Label styleClass="menu-text" text="Dashboard" />
                            </HBox>
                        </graphic>
                    </Button>
                    <Button onAction="#showUserManagement" styleClass="sidebar-menu-item">
                        <graphic>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label styleClass="menu-icon" text="👤" />
                                <Label styleClass="menu-text" text="User Management" />
                            </HBox>
                        </graphic>
                    </Button>


                    <Button onAction="#showProfile" styleClass="sidebar-menu-item">
                        <graphic>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label styleClass="menu-icon" text="👤" />
                                <Label styleClass="menu-text" text="Profile" />
                            </HBox>
                        </graphic>
                    </Button>


                    <Button onAction="#showStat" styleClass="sidebar-menu-item">
                        <graphic>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label styleClass="menu-icon" text="👤" />
                                <Label styleClass="menu-text" text="Stat" />
                            </HBox>
                        </graphic>
                    </Button>


                    <Button onAction="#showSettings" styleClass="sidebar-menu-item">
                        <graphic>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label styleClass="menu-icon" text="⚙" />
                                <Label styleClass="menu-text" text="Settings" />
                            </HBox>
                        </graphic>
                    </Button>
                </VBox>
            </ScrollPane>
        </VBox>
    </left>

    <!-- Main Content -->
    <center>
        <VBox>
            <!-- Top Navigation -->
            <HBox styleClass="top-nav">
                <HBox alignment="CENTER_LEFT" prefHeight="49.0" prefWidth="794.0" spacing="10" HBox.hgrow="ALWAYS">
                    <Button fx:id="openSidebarBtn" onAction="#toggleSidebar" styleClass="icon-button">
                        <graphic>
                            <Label styleClass="icon" text="≡" />
                        </graphic>
                    </Button>
                    <HBox styleClass="search-container">
                        <Label styleClass="search-icon" text="🔍" />
                        <TextField promptText="Search..." styleClass="search-input" />
                    </HBox>
                </HBox>
                <HBox alignment="CENTER_RIGHT" spacing="15">
                    <Button styleClass="icon-button">
                        <graphic>
                            <StackPane>
                                <!-- Logout Button -->
                                <Button onAction="#handleLogout" styleClass="logout-button">
                                    <graphic>
                                        <HBox alignment="CENTER_LEFT" spacing="10">

                                            <Label styleClass="menu-text" text="Logout" />
                                        </HBox>
                                    </graphic>
                                </Button>
                            </StackPane>
                        </graphic>
                    </Button>
                </HBox>
                <padding>
                    <Insets bottom="10" left="20" right="20" top="10" />
                </padding>
            </HBox>

            <!-- Main Content Area -->
            <ScrollPane fitToWidth="true" styleClass="main-content">
                <StackPane>
                    <!-- Dashboard Panel (Default View) -->
                    <VBox fx:id="dashboardPane" styleClass="content-container" visible="true">
                        <!-- Page Header -->
                        <VBox styleClass="page-header">
                            <Label styleClass="page-title" text="Dashboard" />
                            <Label styleClass="page-subtitle" text="Welcome, Admin. Here's your overview." />
                        </VBox>

                        <!-- Quick Actions -->
                        <VBox styleClass="card">
                            <HBox alignment="CENTER_LEFT" spacing="20">
                                <Label styleClass="card-title" text="Quick Actions" />
                                <HBox alignment="CENTER_RIGHT" spacing="10" HBox.hgrow="ALWAYS">

                                </HBox>
                            </HBox>
                        </VBox>

                        <!-- Stats Cards -->
                        <GridPane hgap="15" styleClass="stats-grid" vgap="15">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="33.33" />
                                <ColumnConstraints percentWidth="33.33" />
                                <ColumnConstraints percentWidth="33.33" />
                            </columnConstraints>

                            <!-- Users Card -->
                            <VBox styleClass="card" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                <HBox spacing="15">
                                    <Circle radius="25" styleClass="stat-icon,green-bg" />

                                </HBox>
                                <HBox spacing="5" styleClass="stat-trend">
                                    <Label styleClass="trend-up" text="▲" />
                                    <Label styleClass="trend-up" text="8.2%" />
                                    <Label styleClass="trend-text" text="since last month" />
                                </HBox>
                            </VBox>

                            <!-- Products Card -->
                            <VBox styleClass="card" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                <HBox spacing="15">
                                    <Circle radius="25" styleClass="stat-icon,blue-bg" />

                                </HBox>
                                <HBox spacing="5" styleClass="stat-trend">
                                    <Label styleClass="trend-up" text="▲" />
                                    <Label styleClass="trend-up" text="5.3%" />
                                    <Label styleClass="trend-text" text="since last week" />
                                </HBox>
                            </VBox>

                            <!-- Equipment Card -->
                            <VBox styleClass="card" GridPane.columnIndex="2" GridPane.rowIndex="0">
                                <HBox spacing="15">
                                    <Circle radius="25" styleClass="stat-icon,yellow-bg" />

                                </HBox>
                                <HBox spacing="5" styleClass="stat-trend">
                                    <Label styleClass="trend-up" text="▲" />
                                    <Label styleClass="trend-up" text="12.5%" />
                                    <Label styleClass="trend-text" text="since yesterday" />
                                </HBox>
                            </VBox>
                            <rowConstraints>
                                <RowConstraints />
                            </rowConstraints>
                        </GridPane>

                        <!-- Charts Section -->
                        <VBox styleClass="card">

                            <LineChart fx:id="statisticsChart" legendVisible="false">
                                <xAxis>
                                    <CategoryAxis label="Month" tickLabelRotation="0" />
                                </xAxis>
                                <yAxis>
                                    <NumberAxis label="Value" tickUnit="5" />
                                </yAxis>
                            </LineChart>
                        </VBox>

                        <!-- Notifications and Actions Section -->
                        <GridPane hgap="15" styleClass="tasks-grid" vgap="15">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="60" />
                                <ColumnConstraints percentWidth="40" />
                            </columnConstraints>



                            <!-- Quick Actions Box -->
                            <VBox styleClass="card" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                <HBox alignment="CENTER_LEFT" spacing="20">
                                    <Label styleClass="card-title" text="Quick Actions" />
                                </HBox>
                                <VBox spacing="10" styleClass="tasks-list">
                                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="task-item,in-progress">
                                        <CheckBox styleClass="task-checkbox" />
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Label styleClass="task-title" text="Review pending users" />
                                            <Label styleClass="task-date" text="Due: April 24, 2025" />
                                        </VBox>
                                        <Label styleClass="task-status,status-in-progress" text="In Progress" />
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="task-item,to-do">
                                        <CheckBox styleClass="task-checkbox" />
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Label styleClass="task-title" text="Check inventory levels" />
                                            <Label styleClass="task-date" text="Due: April 25, 2025" />
                                        </VBox>
                                        <Label styleClass="task-status,status-to-do" text="To Do" />
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" spacing="10" styleClass="task-item,completed">
                                        <CheckBox selected="true" styleClass="task-checkbox" />
                                        <VBox HBox.hgrow="ALWAYS">
                                            <Label styleClass="task-title,completed" text="System backup" />
                                            <Label styleClass="task-date" text="Due: April 22, 2025" />
                                        </VBox>
                                        <Label styleClass="task-status,status-completed" text="Completed" />
                                    </HBox>
                                </VBox>
                            </VBox>
                            <rowConstraints>
                                <RowConstraints />
                            </rowConstraints>
                        </GridPane>
                    </VBox>

                    <!-- Other content panes -->
                    <VBox fx:id="appointmentsPane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Text styleClass="page-title" text="My Appointments" />
                    </VBox>

                    <VBox fx:id="patientRecordsPane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Text styleClass="page-title" text="Patient Records" />
                    </VBox>

                    <VBox fx:id="prescriptionsPane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Text styleClass="page-title" text="Prescriptions" />
                    </VBox>

                    <VBox fx:id="medicalNotesPane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Text styleClass="page-title" text="Medical Notes" />
                    </VBox>

                    <!-- User Management Pane -->
                    <VBox fx:id="userManagementPane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <fx:include fx:id="userManagementContent" source="UserManagement.fxml" />
                    </VBox>

                    <VBox fx:id="profilePane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <fx:include fx:id="profileContent" source="Profile.fxml" />
                    </VBox>

                    <VBox fx:id="settingsPane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <Text styleClass="page-title" text="Settings" />
                    </VBox>


                    <VBox fx:id="statPane" spacing="20" visible="false">
                        <padding>
                            <Insets bottom="20" left="20" right="20" top="20" />
                        </padding>
                        <fx:include fx:id="statContent" source="Statistics.fxml" />
                    </VBox>

                </StackPane>
            </ScrollPane>
        </VBox>
    </center>

    <!-- Footer -->
    <bottom>
        <HBox alignment="CENTER" styleClass="footer">
            <padding>
                <Insets bottom="10" left="20" right="20" top="10" />
            </padding>
            <Label styleClass="footer-text" text="© 2025 AgriConnect" />
        </HBox>
    </bottom>

    <stylesheets>
        <URL value="@styles.css" />
    </stylesheets>
</BorderPane>