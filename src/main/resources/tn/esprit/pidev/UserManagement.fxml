<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>


<?import java.net.URL?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>
<VBox xmlns="http://javafx.com/javafx/11.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      spacing="20"
      style="-fx-background-color: #f5f5f5;"
      styleClass="content-card"
      fx:controller="tn.esprit.pidev.UserManagementController">

    <stylesheets>
        <URL value="@styles/listUser.css" />
    </stylesheets>

    <!-- Titre principal -->
    <Text styleClass="page-title" text="Gestion des Utilisateurs" />








    <!-- User Management Form Section -->
    <VBox styleClass="card">

        <VBox styleClass="card-inner">
            <VBox styleClass="card-header">
            <Label styleClass="card-title" text="Formulaire Utilisateur" />
            </VBox>
            <GridPane hgap="15" vgap="15">
                <columnConstraints>
                    <ColumnConstraints percentWidth="33.33" />
                    <ColumnConstraints percentWidth="33.33" />
                    <ColumnConstraints percentWidth="33.33" />
                </columnConstraints>

                <!-- Row 1 -->
                <VBox GridPane.columnIndex="0" GridPane.rowIndex="0">
                    <Label styleClass="form-label" text="ID User" />
                    <TextField fx:id="idField" styleClass="form-field"  GridPane.columnIndex="1" GridPane.rowIndex="0" editable="false" />
                </VBox>

                <VBox GridPane.columnIndex="1" GridPane.rowIndex="0">
                    <Label styleClass="form-label" text="Genre" />
                    <ComboBox fx:id="genderCombo" GridPane.columnIndex="3" GridPane.rowIndex="0" prefWidth="Infinity" styleClass="form-field">

                    </ComboBox>
                </VBox>

                <VBox GridPane.columnIndex="2" GridPane.rowIndex="0">
                    <Label styleClass="form-label" text="Prénom" />
                    <TextField fx:id="firstNameField" styleClass="form-field" />
                </VBox>

                <!-- Row 2 -->
                <VBox GridPane.columnIndex="0" GridPane.rowIndex="1">
                    <Label styleClass="form-label" text="Téléphone" />
                    <TextField fx:id="phoneField" styleClass="form-field" />
                </VBox>

                <VBox GridPane.columnIndex="1" GridPane.rowIndex="1">
                    <Label styleClass="form-label" text="Nom" />
                    <TextField fx:id="lastNameField" styleClass="form-field" />
                </VBox>

                <VBox GridPane.columnIndex="2" GridPane.rowIndex="1">
                    <Label styleClass="form-label" text="Rôle" />
                    <ComboBox fx:id="roleCombo"  GridPane.columnIndex="3" GridPane.rowIndex="2" prefWidth="Infinity" styleClass="form-field">

                    </ComboBox>
                </VBox>

                <!-- Row 3 -->
                <VBox GridPane.columnIndex="0" GridPane.columnSpan="3" GridPane.rowIndex="2">
                    <Label styleClass="form-label" text="Email" />
                    <TextField fx:id="emailField" styleClass="form-field" />
                </VBox>
                <rowConstraints>
                    <RowConstraints />
                    <RowConstraints />
                    <RowConstraints />
                </rowConstraints>
            </GridPane>

            <HBox spacing="10" styleClass="button-container">
                <Button styleClass="primary-button" text="+" onAction="#handleAdd">
                    <graphic>

                    </graphic>
                </Button>

                <Button styleClass="primary-button" text="Update" onAction="#handleUpdate">
                    <graphic>
                    </graphic>
                </Button>

                <Button  styleClass="danger-button" text="Delete" onAction="#handleDelete">
                    <graphic>

                    </graphic>
                </Button>

                <Button  styleClass="secondary-button" text="Réinitialiser" onAction="#handleClear">
                    <graphic>

                    </graphic>
                </Button>
            </HBox>
        </VBox>
    </VBox>



















    <!-- Users List Section -->
    <VBox styleClass="card">
        <VBox styleClass="card-header">
            <Label styleClass="card-title" text="Liste des Utilisateurs" />
        </VBox>

        <VBox styleClass="card-inner">
            <HBox spacing="10" styleClass="search-filter-container">
                <TextField fx:id="searchField" promptText="Rechercher un utilisateur..." styleClass="search-field" HBox.hgrow="ALWAYS" />

                <ComboBox fx:id="filterRoleCombo" styleClass="form-field">

                </ComboBox>

                <Button styleClass="secondary-button" text="Actualiser" onAction="#loadUsers">
                    <graphic>

                    </graphic>
                </Button>
            </HBox>

            <FlowPane fx:id="usersCardsContainer" hgap="15" styleClass="user-cards-container" vgap="15">
                <!-- User cards will be added dynamically in the controller -->
            </FlowPane>
        </VBox>
    </VBox>







    <!-- Message d'état -->
    <Label fx:id="messageLabel" styleClass="status-message"/>
</VBox>