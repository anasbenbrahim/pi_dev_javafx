<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.*?>

<?import java.net.URL?>
<VBox xmlns="http://javafx.com/javafx/11.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      spacing="20"
      style="-fx-background-color: #f5f5f5;"
      styleClass="content-card"
      fx:controller="tn.esprit.pidev.UserManagementController">

    <stylesheets>
        <URL value="@styles/listUser.css" />
    </stylesheets>

    <!-- Titre principal -->
    <Text styleClass="page-title" text="Gestion des Utilisateurs" />

    <!-- Carte de formulaire -->
    <VBox styleClass="content-card" spacing="15">
        <Text styleClass="card-title" text="Formulaire Utilisateur" />

        <GridPane hgap="15" vgap="15">
            <padding><Insets bottom="10" left="10" right="10" top="10"/></padding>

            <!-- Première colonne -->
            <Label text="ID Employé:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
            <TextField fx:id="idField" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="0" editable="false"/>

            <Label text="Prénom:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
            <TextField fx:id="firstNameField" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

            <Label text="Nom:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
            <TextField fx:id="lastNameField" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

            <!-- Deuxième colonne -->
            <Label text="Genre:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
            <ComboBox fx:id="genderCombo" styleClass="form-combo" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

            <Label text="Téléphone:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
            <TextField fx:id="phoneField" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

            <Label text="Rôle:" styleClass="form-label" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
            <ComboBox fx:id="roleCombo" styleClass="form-combo" GridPane.columnIndex="3" GridPane.rowIndex="2"/>

            <!-- Ligne pleine largeur -->
            <Label text="Email:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
            <TextField fx:id="emailField" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="3" GridPane.columnSpan="3"/>
        </GridPane>

        <!-- Boutons d'action -->
        <HBox spacing="15" alignment="CENTER">
            <Button text="Ajouter" styleClass="action-button" onAction="#handleAdd"/>
            <Button text="Modifier" styleClass="action-button" onAction="#handleUpdate"/>
            <Button text="Supprimer" styleClass="delete-button" onAction="#handleDelete"/>
            <Button text="Réinitialiser" styleClass="secondary-button" onAction="#handleClear"/>
        </HBox>
    </VBox>

    <!-- Liste des utilisateurs -->
    <VBox styleClass="content-card" spacing="15">
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Text styleClass="card-title" text="Liste des Utilisateurs" />
        </HBox>

        <!-- Barre de recherche et filtres -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <TextField fx:id="searchField" styleClass="search-field" promptText="Rechercher un utilisateur..."/>
            <ComboBox fx:id="filterRoleCombo" styleClass="filter-combo" promptText="Filtrer par rôle"/>
            <Button text="Actualiser" styleClass="secondary-button" onAction="#loadUsers"/>
        </HBox>

        <!-- Cartes des utilisateurs -->
        <FlowPane fx:id="usersCardsContainer" hgap="15" vgap="15" prefWrapLength="800">
            <padding><Insets bottom="10" left="10" right="10" top="10"/></padding>
        </FlowPane>
    </VBox>

    <!-- Message d'état -->
    <Label fx:id="messageLabel" styleClass="status-message"/>
</VBox>